.PHONY: dat/all dat/clean

dat/all: $(DAT_DATA_OBJECTS) $(DAT_ORACLES_OBJECTS) $(DAT_OPTIONS_OBJECTS) $(DAT_QUEST_OBJECTS) $(DAT_RUMORS_OBJECTS) $(DAT_DUNGEON_OBJECTS) $(DAT_SPEC_OBJECTS)

dat/clean:
	$(RM) $(DAT_DATA_OBJECTS) $(DAT_ORACLES_OBJECTS) $(DAT_OPTIONS_OBJECTS) $(DAT_QUEST_OBJECTS) $(DAT_RUMORS_OBJECTS) $(DAT_DUNGEON_OBJECTS) $(DAT_SPEC_OBJECTS) $(DAT_QUEST_LEVEL_OBJECTS) $(DAT_DUNGEON_GENERATED) $(CURDIR)/*.lev

$(DAT_DATA_OBJECTS): $(DAT_DATA_SOURCES) $(MAKEDEFS)
	$(MAKEDEFS) -d

$(DAT_ORACLES_OBJECTS): $(DAT_ORACLES_SOURCES) $(MAKEDEFS)
	$(MAKEDEFS) -h

$(DAT_OPTIONS_OBJECTS): $(MAKEDEFS)
	$(MAKEDEFS) -v

$(DAT_QUEST_OBJECTS): $(DAT_QUEST_SOURCES) $(MAKEDEFS)
	$(MAKEDEFS) -q

$(DAT_RUMORS_OBJECTS): $(DAT_RUMORS_SOURCES) $(MAKEDEFS)
	$(MAKEDEFS) -r

$(DAT_DUNGEON_GENERATED): $(DAT_DUNGEON_SOURCES) $(MAKEDEFS)
	$(MAKEDEFS) -e

$(DAT_DUNGEON_OBJECTS): %: %.pdf $(DGN_COMP)
	$(DGN_COMP) $<

# This uses an ugly hack. I hate it, and it should die.
$(DAT_SPEC_OBJECTS) $(DAT_QUEST_LEVEL_OBJECTS): %.lev: %.des $(LEV_COMP)
	$(LEV_COMP) $<
	touch $@
